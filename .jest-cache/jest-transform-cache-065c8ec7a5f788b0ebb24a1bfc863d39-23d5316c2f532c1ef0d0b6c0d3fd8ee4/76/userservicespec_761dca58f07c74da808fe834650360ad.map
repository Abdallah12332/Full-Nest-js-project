{"file":"/home/omar/Desktop/Protofolio_without_redis/src/user/user.service.spec.ts","mappings":";;AAAA,6CAAsD;AACtD,iDAA6C;AAC7C,6CAAqD;AACrD,yDAA+C;AAC/C,2CAAwE;AAExE,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;IAC3B,IAAI,OAAoB,CAAC;IACzB,IAAI,QAAmC,CAAC;IACxC,IAAI,WAAsC,CAAC;IAC3C,IAAI,UAAqC,CAAC;IAC1C,IAAI,QAAmC,CAAC;IACxC,IAAI,YAAuC,CAAC;IAE5C,UAAU,CAAC,KAAK,IAAI,EAAE;QACpB,MAAM,MAAM,GAAkB,MAAM,cAAI,CAAC,mBAAmB,CAAC;YAC3D,SAAS,EAAE;gBACT,0BAAW;gBACX,EAAE,OAAO,EAAE,IAAA,4BAAkB,EAAC,kBAAI,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE;gBACnD;oBACE,OAAO,EAAE,gBAAgB;oBACzB,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE;iBACjC;gBACD;oBACE,OAAO,EAAE,mBAAmB;oBAC5B,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE;iBACvD;gBACD;oBACE,OAAO,EAAE,kBAAkB;oBAC3B,QAAQ,EAAE;wBACR,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;wBAClB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;wBACjB,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE;wBACf,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;wBACjB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;qBAClB;iBACF;gBACD;oBACE,OAAO,EAAE,gBAAgB;oBACzB,QAAQ,EAAE;wBACR,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;wBAClB,SAAS,EAAE,IAAI,CAAC,EAAE,EAAE;qBACrB;iBACF;gBACD;oBACE,OAAO,EAAE,oBAAoB;oBAC7B,QAAQ,EAAE;wBACR,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;wBAClB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;wBACjB,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE;wBACf,SAAS,EAAE,IAAI,CAAC,EAAE,EAAE;wBACpB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;qBAClB;iBACF;aACF;SACF,CAAC,CAAC,OAAO,EAAE,CAAC;QAEb,OAAO,GAAG,MAAM,CAAC,GAAG,CAAc,0BAAW,CAAC,CAAC;QAC/C,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACxC,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAC9C,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAC5C,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QACxC,YAAY,GAAG,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,0BAA0B,EAAE,GAAG,EAAE;QACxC,EAAE,CAAC,mBAAmB,EAAE,GAAG,EAAE;YAC3B,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;QAC1B,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACzC,MAAM,MAAM,CACV,OAAO,CAAC,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CACjD,CAAC,OAAO,CAAC,OAAO,CAAC,0BAAiB,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;YACjD,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;YACzD,WAAW,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC5C,MAAM,MAAM,CACV,OAAO,CAAC,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CACjD,CAAC,OAAO,CAAC,OAAO,CAAC,0BAAiB,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,QAAQ,GAAG,EAAE,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;YAC3D,MAAM,WAAW,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC;YAChC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;YAC7C,WAAW,CAAC,OAAO,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;YACnD,UAAU,CAAC,MAAM,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YACtC,UAAU,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAEtC,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;YACtE,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;QAC3B,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC3C,MAAM,MAAM,CACV,OAAO,CAAC,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CACpD,CAAC,OAAO,CAAC,OAAO,CAAC,0BAAiB,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,MAAM,UAAU,GAAG,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,gBAAgB,EAAE,EAAE,CAAC,CAAC,eAAe;YACzE,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;YAEjD,MAAM,MAAM,CACV,OAAO,CAAC,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CACpD,CAAC,OAAO,CAAC,OAAO,CAAC,0BAAiB,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;YAC/C,MAAM,UAAU,GAAG,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,CAAC;YACrD,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;YACjD,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAExC,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;YACzE,MAAM,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,QAAQ,CAAC,eAAe,EAAE,GAAG,EAAE;QAC7B,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC3C,MAAM,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CACtE,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,+DAA+D,EAAE,KAAK,IAAI,EAAE;YAC7E,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC;gBACnC,EAAE,EAAE,KAAK;gBACT,IAAI,EAAE,EAAE,KAAK,EAAE,gBAAgB,EAAE;aAClC,CAAC,CAAC;YACH,MAAM,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CACtE,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YAClE,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC;gBACnC,EAAE,EAAE,KAAK;gBACT,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE;aAC9B,CAAC,CAAC;YACH,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YACxC,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,aAAa,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;YAEhE,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;YAC9D,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,QAAQ,CAAC,eAAe,EAAE,GAAG,EAAE;QAC7B,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE3C,MAAM,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC/D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qDAAqD,EAAE,KAAK,IAAI,EAAE;YACnE,mBAAmB;YACnB,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;YACpD,uBAAuB;YACvB,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE9C,MAAM,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC/D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0DAA0D,EAAE,KAAK,IAAI,EAAE;YACxE,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;YACpD,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;YACvD,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,sBAAsB;YAE3E,MAAM,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC/D,4BAAmB,CACpB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qDAAqD,EAAE,KAAK,IAAI,EAAE;YACnE,MAAM,QAAQ,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC;YAC/B,MAAM,WAAW,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC;YAClC,MAAM,YAAY,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC;YAEnC,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;YAC/C,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;YACrD,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC7C,YAAY,CAAC,MAAM,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;YAClD,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAElD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAEzD,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC/C,QAAQ,EAAE,CAAC;gBACX,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,WAAW;aACrB,CAAC,CAAC;YACH,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;YAC7D,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;QAChC,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC3C,MAAM,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC9D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qDAAqD,EAAE,KAAK,IAAI,EAAE;YACnE,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YAClD,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC9C,MAAM,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC9D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YAClD,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YACrD,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC7C,MAAM,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC9D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,QAAQ,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC;YAC7B,QAAQ,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YAClD,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;YACrD,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;YACjD,YAAY,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAE1C,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YAExD,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YAC3D,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;QACjC,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,YAAY,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC1D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,YAAY,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;YACrE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YACpD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,QAAQ,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;YAC1C,YAAY,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;YACnD,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAExC,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YAEpD,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAClC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YACzD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;QACjC,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,YAAY,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC1D,0BAAiB,CAClB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACnD,YAAY,CAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;YACnE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YACpD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,QAAQ,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;YAC1C,YAAY,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;YACnD,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAExC,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YAEpD,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAClC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YACzD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC9B,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;YAChD,MAAM,MAAM,GAAG;gBACb,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBACjC,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBACnC,iBAAiB,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBAC7C,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBAChC,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBAChC,eAAe,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aAClE,CAAC;YACF,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YAEnE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YACvD,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;gBACrB,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC;gBACxB,WAAW,EAAE,CAAC;gBACd,UAAU,EAAE,CAAC;aACd,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YACzD,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAC,GAAG,EAAE;gBACjE,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC;YACH,MAAM,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC1D,2BAA2B,CAC5B,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,wBAAwB,EAAE,GAAG,EAAE;QACtC,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,MAAM,GAAG;gBACb,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBACjC,iBAAiB,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBAC7C,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBAChC,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,cAAc,EAAE;gBAChC,eAAe,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aAClE,CAAC;YACF,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YAEnE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAC/D,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;gBACrB,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC;gBACxB,WAAW,EAAE,CAAC;gBACd,UAAU,EAAE,CAAC;aACd,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YACzD,WAAW,CAAC,kBAAkB,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAC,GAAG,EAAE;gBACjE,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC;YACH,MAAM,MAAM,CAAC,OAAO,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CACrE,sCAAsC,CACvC,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/user/user.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from \"@nestjs/testing\";\nimport { UserService } from \"./user.service\";\nimport { getRepositoryToken } from \"@nestjs/typeorm\";\nimport { User } from \"../entities/User.entity\";\nimport { BadRequestException, NotFoundException } from \"@nestjs/common\";\n\ndescribe(\"UserService\", () => {\n  let service: UserService;\n  let userRepo: Record<string, jest.Mock>;\n  let productRepo: Record<string, jest.Mock>;\n  let reviewRepo: Record<string, jest.Mock>;\n  let cartRepo: Record<string, jest.Mock>;\n  let cartItemRepo: Record<string, jest.Mock>;\n\n  beforeEach(async () => {\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        UserService,\n        { provide: getRepositoryToken(User), useValue: {} },\n        {\n          provide: \"UserRepository\",\n          useValue: { findOne: jest.fn() },\n        },\n        {\n          provide: \"ProductRepository\",\n          useValue: { findOne: jest.fn(), findOneBy: jest.fn() },\n        },\n        {\n          provide: \"ReviewRepository\",\n          useValue: {\n            findOne: jest.fn(),\n            create: jest.fn(),\n            save: jest.fn(),\n            update: jest.fn(),\n            delete: jest.fn(),\n          },\n        },\n        {\n          provide: \"CartRepository\",\n          useValue: {\n            findOne: jest.fn(),\n            findOneBy: jest.fn(),\n          },\n        },\n        {\n          provide: \"CartItemRepository\",\n          useValue: {\n            findOne: jest.fn(),\n            create: jest.fn(),\n            save: jest.fn(),\n            findOneBy: jest.fn(),\n            remove: jest.fn(),\n          },\n        },\n      ],\n    }).compile();\n\n    service = module.get<UserService>(UserService);\n    userRepo = module.get(\"UserRepository\");\n    productRepo = module.get(\"ProductRepository\");\n    reviewRepo = module.get(\"ReviewRepository\");\n    cartRepo = module.get(\"CartRepository\");\n    cartItemRepo = module.get(\"CartItemRepository\");\n  });\n\n  describe(\"Check if service defined\", () => {\n    it(\"should be defined\", () => {\n      expect(service).toBeDefined();\n    });\n  });\n\n  describe(\"Add_Review\", () => {\n    it(\"should throw if user not found\", async () => {\n      userRepo.findOne.mockResolvedValue(null);\n      await expect(\n        service.Add_Review(\"x@test.com\", \"good\", \"1\", 5),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it(\"should throw if product not found\", async () => {\n      userRepo.findOne.mockResolvedValue({ isVerified: true });\n      productRepo.findOne.mockResolvedValue(null);\n      await expect(\n        service.Add_Review(\"x@test.com\", \"good\", \"1\", 5),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it(\"should return ok if review saved successfully\", async () => {\n      const mockUser = { email: \"x@test.com\", isVerified: true };\n      const mockProduct = { id: \"1\" };\n      userRepo.findOne.mockResolvedValue(mockUser);\n      productRepo.findOne.mockResolvedValue(mockProduct);\n      reviewRepo.create.mockReturnValue({});\n      reviewRepo.save.mockResolvedValue({});\n\n      const result = await service.Add_Review(\"x@test.com\", \"good\", \"1\", 5);\n      expect(result).toBe(\"ok\");\n    });\n  });\n  describe(\"Edit_Review\", () => {\n    it(\"should throw notfoundexception\", async () => {\n      reviewRepo.findOne.mockResolvedValue(null);\n      await expect(\n        service.Edit_Review(\"x@test.com\", \"343\", \"good\", 5),\n      ).rejects.toThrow(NotFoundException);\n    });\n    it(\"should throw NotFoundException if user not authorized\", async () => {\n      const mockReview = { user: { email: \"other@test.com\" } }; // مستخدم مختلف\n      reviewRepo.findOne.mockResolvedValue(mockReview);\n\n      await expect(\n        service.Edit_Review(\"x@test.com\", \"343\", \"good\", 5),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it(\"should pass if user owns review\", async () => {\n      const mockReview = { user: { email: \"x@test.com\" } };\n      reviewRepo.findOne.mockResolvedValue(mockReview);\n      reviewRepo.update.mockResolvedValue({});\n\n      const result = await service.Edit_Review(\"x@test.com\", \"343\", \"good\", 5);\n      expect(result).toBeDefined();\n    });\n  });\n  describe(\"Remove_Review\", () => {\n    it(\"must retutn NotFoundException\", async () => {\n      reviewRepo.findOne.mockResolvedValue(null);\n      await expect(service.Remove_Review(\"x@test.com\", \"343\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n    it(\"should throw NotFoundException when user email does not match\", async () => {\n      reviewRepo.findOne.mockResolvedValue({\n        id: \"343\",\n        user: { email: \"other@test.com\" },\n      });\n      await expect(service.Remove_Review(\"x@test.com\", \"343\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n    it(\"should delete review and return ok when authorized\", async () => {\n      reviewRepo.findOne.mockResolvedValue({\n        id: \"343\",\n        user: { email: \"x@test.com\" },\n      });\n      reviewRepo.delete.mockResolvedValue({});\n      const result = await service.Remove_Review(\"x@test.com\", \"343\");\n\n      expect(reviewRepo.delete).toHaveBeenCalledWith({ id: \"343\" });\n      expect(result).toBe(\"ok\");\n    });\n  });\n  describe(\"Add_Cart_Item\", () => {\n    it(\"should throw NotFoundException if cart not found\", async () => {\n      cartRepo.findOneBy.mockResolvedValue(null);\n\n      await expect(service.Add_Cart_Item(\"343\", \"444\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should throw NotFoundException if product not found\", async () => {\n      // mock cart exists\n      cartRepo.findOneBy.mockResolvedValue({ id: \"343\" });\n      // mock product missing\n      productRepo.findOneBy.mockResolvedValue(null);\n\n      await expect(service.Add_Cart_Item(\"343\", \"444\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should throw BadRequestException if item already in cart\", async () => {\n      cartRepo.findOneBy.mockResolvedValue({ id: \"343\" });\n      productRepo.findOneBy.mockResolvedValue({ id: \"444\" });\n      cartItemRepo.findOne.mockResolvedValue({ id: \"1\" }); // item already exists\n\n      await expect(service.Add_Cart_Item(\"343\", \"444\")).rejects.toThrow(\n        BadRequestException,\n      );\n    });\n\n    it(\"should create and save new cart item when all valid\", async () => {\n      const mockCart = { id: \"343\" };\n      const mockProduct = { id: \"444\" };\n      const mockCartItem = { id: \"999\" };\n\n      cartRepo.findOneBy.mockResolvedValue(mockCart);\n      productRepo.findOneBy.mockResolvedValue(mockProduct);\n      cartItemRepo.findOne.mockResolvedValue(null);\n      cartItemRepo.create.mockReturnValue(mockCartItem);\n      cartItemRepo.save.mockResolvedValue(mockCartItem);\n\n      const result = await service.Add_Cart_Item(\"343\", \"444\");\n\n      expect(cartItemRepo.create).toHaveBeenCalledWith({\n        quantity: 1,\n        cart: mockCart,\n        product: mockProduct,\n      });\n      expect(cartItemRepo.save).toHaveBeenCalledWith(mockCartItem);\n      expect(result).toBe(\"ok\");\n    });\n  });\n  describe(\"Remove_Cart_Item\", () => {\n    it(\"should throw NotFoundException if cart not found\", async () => {\n      cartRepo.findOneBy.mockResolvedValue(null);\n      await expect(service.Remove_Cart_Item(\"1\", \"2\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should throw NotFoundException if product not found\", async () => {\n      cartRepo.findOneBy.mockResolvedValue({ id: \"1\" });\n      productRepo.findOneBy.mockResolvedValue(null);\n      await expect(service.Remove_Cart_Item(\"1\", \"2\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should throw NotFoundException if cart item not found\", async () => {\n      cartRepo.findOneBy.mockResolvedValue({ id: \"1\" });\n      productRepo.findOneBy.mockResolvedValue({ id: \"2\" });\n      cartItemRepo.findOne.mockResolvedValue(null);\n      await expect(service.Remove_Cart_Item(\"1\", \"2\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should remove cart item and return ok\", async () => {\n      const mockItem = { id: \"3\" };\n      cartRepo.findOneBy.mockResolvedValue({ id: \"1\" });\n      productRepo.findOneBy.mockResolvedValue({ id: \"2\" });\n      cartItemRepo.findOne.mockResolvedValue(mockItem);\n      cartItemRepo.remove.mockResolvedValue({});\n\n      const result = await service.Remove_Cart_Item(\"1\", \"2\");\n\n      expect(cartItemRepo.remove).toHaveBeenCalledWith(mockItem);\n      expect(result).toBe(\"ok\");\n    });\n  });\n\n  describe(\"increase_Quantity\", () => {\n    it(\"should throw NotFoundException if cart item not found\", async () => {\n      cartItemRepo.findOneBy.mockResolvedValue(null);\n      await expect(service.increase_Quantity(\"1\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should return 'no' if quantity >= 999\", async () => {\n      cartItemRepo.findOneBy.mockResolvedValue({ id: \"1\", quantity: 999 });\n      const result = await service.increase_Quantity(\"1\");\n      expect(result).toBe(\"no\");\n    });\n\n    it(\"should increment quantity and save if valid\", async () => {\n      const mockItem = { id: \"1\", quantity: 5 };\n      cartItemRepo.findOneBy.mockResolvedValue(mockItem);\n      cartItemRepo.save.mockResolvedValue({});\n\n      const result = await service.increase_Quantity(\"1\");\n\n      expect(mockItem.quantity).toBe(6);\n      expect(cartItemRepo.save).toHaveBeenCalledWith(mockItem);\n      expect(result).toBe(\"ok\");\n    });\n  });\n\n  describe(\"decrease_Quantity\", () => {\n    it(\"should throw NotFoundException if cart item not found\", async () => {\n      cartItemRepo.findOneBy.mockResolvedValue(null);\n      await expect(service.decrease_Quantity(\"1\")).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it(\"should return 'no' if quantity <= 1\", async () => {\n      cartItemRepo.findOneBy.mockResolvedValue({ id: \"1\", quantity: 1 });\n      const result = await service.decrease_Quantity(\"1\");\n      expect(result).toBe(\"no\");\n    });\n\n    it(\"should decrement quantity and save if valid\", async () => {\n      const mockItem = { id: \"1\", quantity: 5 };\n      cartItemRepo.findOneBy.mockResolvedValue(mockItem);\n      cartItemRepo.save.mockResolvedValue({});\n\n      const result = await service.decrease_Quantity(\"1\");\n\n      expect(mockItem.quantity).toBe(4);\n      expect(cartItemRepo.save).toHaveBeenCalledWith(mockItem);\n      expect(result).toBe(\"ok\");\n    });\n  });\n\n  describe(\"SearchProducts\", () => {\n    it(\"should return paginated products\", async () => {\n      const mockQB = {\n        where: jest.fn().mockReturnThis(),\n        orWhere: jest.fn().mockReturnThis(),\n        leftJoinAndSelect: jest.fn().mockReturnThis(),\n        skip: jest.fn().mockReturnThis(),\n        take: jest.fn().mockReturnThis(),\n        getManyAndCount: jest.fn().mockResolvedValue([[{ id: \"p1\" }], 1]),\n      };\n      productRepo.createQueryBuilder = jest.fn().mockReturnValue(mockQB);\n\n      const result = await service.SearchProducts(\"test\", 1);\n      expect(result).toEqual({\n        products: [{ id: \"p1\" }],\n        currentPage: 1,\n        totalPages: 1,\n      });\n    });\n\n    it(\"should throw error if query builder fails\", async () => {\n      productRepo.createQueryBuilder = jest.fn().mockImplementation(() => {\n        throw new Error(\"fail\");\n      });\n      await expect(service.SearchProducts(\"x\", 1)).rejects.toThrow(\n        /Failed to search products/,\n      );\n    });\n  });\n\n  describe(\"FindProductsByCategory\", () => {\n    it(\"should return paginated products by category\", async () => {\n      const mockQB = {\n        where: jest.fn().mockReturnThis(),\n        leftJoinAndSelect: jest.fn().mockReturnThis(),\n        skip: jest.fn().mockReturnThis(),\n        take: jest.fn().mockReturnThis(),\n        getManyAndCount: jest.fn().mockResolvedValue([[{ id: \"p2\" }], 1]),\n      };\n      productRepo.createQueryBuilder = jest.fn().mockReturnValue(mockQB);\n\n      const result = await service.FindProductsByCategory(\"cat1\", 1);\n      expect(result).toEqual({\n        products: [{ id: \"p2\" }],\n        currentPage: 1,\n        totalPages: 1,\n      });\n    });\n\n    it(\"should throw error if query builder fails\", async () => {\n      productRepo.createQueryBuilder = jest.fn().mockImplementation(() => {\n        throw new Error(\"fail\");\n      });\n      await expect(service.FindProductsByCategory(\"cat1\", 1)).rejects.toThrow(\n        /Failed to fetch products by category/,\n      );\n    });\n  });\n});\n"],"version":3}