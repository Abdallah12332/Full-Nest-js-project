{"version":3,"names":["common_1","cov_16pfzyzjky","s","require","app_controller_1","app_service_1","admin_module_1","typeorm_1","User_entity_1","Product_entity_1","Cart_entity_1","Cart_Item_entity_1","Order_entity_1","Review_entity_1","FailedAttempt_entity_1","PasswordReset_entity_1","auth_module_1","config_1","Verification_entity_1","user_module_1","Joi","__importStar","throttler_1","core_1","log_module_1","all_exceptions_filter_1","Log_entity_1","BlackList_entity_1","csrf_middleware_1","AppModule","configure","consumer","f","apply","CsrfMiddleware","forRoutes","exports","__decorate","Module","imports","ConfigModule","forRoot","isGlobal","validationSchema","object","GOOGLE_CLIENT_ID","string","required","GOOGLE_CLIENT_SECRET","GOOGLE_CALLBACK_URL","uri","JWT_SECRET","EMAIL","email","PASSWORD","DB_PASS","DB_HOST","DB_PORT","number","DB_USER","DB_NAME","DB_POOL_SIZE","JWT_EXPIRES_ACCESSTOKEN","JWT_EXPIRES_REFRESHTOKEN","CORS","PORT","NODE_ENV","ThrottlerModule","throttlers","ttl","limit","TypeOrmModule","forRootAsync","inject","ConfigService","useFactory","config","type","host","get","port","username","password","database","entities","User","Product","Cart","CartItem","Order","Review","Verification","FailedAttempt","PasswordReset","Log","RefreshTokenBlacklist","synchronize","extra","connectionLimit","b","AdminModule","AuthModule","UserModule","LogModule","controllers","AppController","providers","AppService","provide","APP_GUARD","useClass","ThrottlerGuard","APP_FILTER","AllExceptionsFilter"],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/app.module.ts"],"sourcesContent":["import { MiddlewareConsumer, Module, NestModule } from \"@nestjs/common\";\nimport { AppController } from \"./app.controller\";\nimport { AppService } from \"./app.service\";\nimport { AdminModule } from \"./admin/admin.module\";\nimport { TypeOrmModule } from \"@nestjs/typeorm\";\nimport { User } from \"./entities/User.entity\";\nimport { Product } from \"./entities/Product.entity\";\nimport { Cart } from \"./entities/Cart.entity\";\nimport { CartItem } from \"./entities/Cart_Item.entity\";\nimport { Order } from \"./entities/Order.entity\";\nimport { Review } from \"./entities/Review.entity\";\nimport { FailedAttempt } from \"./entities/FailedAttempt.entity\";\nimport { PasswordReset } from \"./entities/PasswordReset.entity\";\nimport { AuthModule } from \"./auth/auth.module\";\nimport { ConfigModule, ConfigService } from \"@nestjs/config\";\nimport { Verification } from \"./entities/Verification.entity\";\nimport { UserModule } from \"./user/user.module\";\nimport * as Joi from \"joi\";\nimport { ThrottlerGuard, ThrottlerModule } from \"@nestjs/throttler\";\nimport { APP_FILTER, APP_GUARD } from \"@nestjs/core\";\nimport { LogModule } from \"./log/log.module\";\nimport { AllExceptionsFilter } from \"./log/filters/all-exceptions.filter\";\nimport { Log } from \"./entities/Log.entity\";\nimport { RefreshTokenBlacklist } from \"./entities/BlackList.entity\";\nimport { CsrfMiddleware } from \"./csrf.middleware\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      isGlobal: true,\n      validationSchema: Joi.object({\n        GOOGLE_CLIENT_ID: Joi.string().required(),\n        GOOGLE_CLIENT_SECRET: Joi.string().required(),\n        GOOGLE_CALLBACK_URL: Joi.string().uri().required(),\n        JWT_SECRET: Joi.string().required(),\n        EMAIL: Joi.string().email().required(),\n        PASSWORD: Joi.string().required(),\n        DB_PASS: Joi.string().required(),\n        DB_HOST: Joi.string().required(),\n        DB_PORT: Joi.number().required(),\n        DB_USER: Joi.string().required(),\n        DB_NAME: Joi.string().required(),\n        DB_POOL_SIZE: Joi.number().required(),\n        JWT_EXPIRES_ACCESSTOKEN: Joi.string().required(),\n        JWT_EXPIRES_REFRESHTOKEN: Joi.string().required(),\n        CORS: Joi.string() /*.uri()*/\n          .required(),\n        PORT: Joi.string().required(),\n        NODE_ENV: Joi.string().required(),\n      }),\n    }),\n    ThrottlerModule.forRoot({\n      throttlers: [\n        {\n          ttl: 60,\n          limit: 10,\n        },\n      ],\n    }),\n    TypeOrmModule.forRootAsync({\n      imports: [ConfigModule],\n      inject: [ConfigService],\n      useFactory: (config: ConfigService) => ({\n        type: \"mariadb\",\n        host: config.get<string>(\"DB_HOST\"),\n        port: config.get<number>(\"DB_PORT\"),\n        username: config.get<string>(\"DB_USER\"),\n        password: config.get<string>(\"DB_PASS\"),\n        database: config.get<string>(\"DB_NAME\"),\n        entities: [\n          User,\n          Product,\n          Cart,\n          CartItem,\n          Order,\n          Review,\n          Verification,\n          FailedAttempt,\n          PasswordReset,\n          Log,\n          RefreshTokenBlacklist,\n        ],\n        synchronize: false,\n        extra: {\n          connectionLimit: config.get<number>(\"DB_POOL_SIZE\") || 10,\n        },\n      }),\n    }),\n    AdminModule,\n    AuthModule,\n    UserModule,\n    LogModule,\n  ],\n  controllers: [AppController],\n  providers: [\n    AppService,\n    {\n      provide: APP_GUARD,\n      useClass: ThrottlerGuard,\n    },\n    {\n      provide: APP_FILTER,\n      useClass: AllExceptionsFilter,\n    },\n  ],\n})\nexport class AppModule implements NestModule {\n  configure(consumer: MiddlewareConsumer) {\n    consumer.apply(CsrfMiddleware).forRoutes(\"\");\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}