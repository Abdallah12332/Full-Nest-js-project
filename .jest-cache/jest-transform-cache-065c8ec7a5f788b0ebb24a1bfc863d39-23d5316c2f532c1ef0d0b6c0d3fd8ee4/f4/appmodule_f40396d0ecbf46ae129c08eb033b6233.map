{"file":"/home/omar/Desktop/Protofolio_without_redis/src/app.module.ts","mappings":"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","names":[],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/app.module.ts"],"sourcesContent":["import { MiddlewareConsumer, Module, NestModule } from \"@nestjs/common\";\nimport { AppController } from \"./app.controller\";\nimport { AppService } from \"./app.service\";\nimport { AdminModule } from \"./admin/admin.module\";\nimport { TypeOrmModule } from \"@nestjs/typeorm\";\nimport { User } from \"./entities/User.entity\";\nimport { Product } from \"./entities/Product.entity\";\nimport { Cart } from \"./entities/Cart.entity\";\nimport { CartItem } from \"./entities/Cart_Item.entity\";\nimport { Order } from \"./entities/Order.entity\";\nimport { Review } from \"./entities/Review.entity\";\nimport { FailedAttempt } from \"./entities/FailedAttempt.entity\";\nimport { PasswordReset } from \"./entities/PasswordReset.entity\";\nimport { AuthModule } from \"./auth/auth.module\";\nimport { ConfigModule, ConfigService } from \"@nestjs/config\";\nimport { Verification } from \"./entities/Verification.entity\";\nimport { UserModule } from \"./user/user.module\";\nimport * as Joi from \"joi\";\nimport { ThrottlerGuard, ThrottlerModule } from \"@nestjs/throttler\";\nimport { APP_FILTER, APP_GUARD } from \"@nestjs/core\";\nimport { LogModule } from \"./log/log.module\";\nimport { AllExceptionsFilter } from \"./log/filters/all-exceptions.filter\";\nimport { Log } from \"./entities/Log.entity\";\nimport { RefreshTokenBlacklist } from \"./entities/BlackList.entity\";\nimport { CsrfMiddleware } from \"./csrf.middleware\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      isGlobal: true,\n      validationSchema: Joi.object({\n        GOOGLE_CLIENT_ID: Joi.string().required(),\n        GOOGLE_CLIENT_SECRET: Joi.string().required(),\n        GOOGLE_CALLBACK_URL: Joi.string().uri().required(),\n        JWT_SECRET: Joi.string().required(),\n        EMAIL: Joi.string().email().required(),\n        PASSWORD: Joi.string().required(),\n        DB_PASS: Joi.string().required(),\n        DB_HOST: Joi.string().required(),\n        DB_PORT: Joi.number().required(),\n        DB_USER: Joi.string().required(),\n        DB_NAME: Joi.string().required(),\n        DB_POOL_SIZE: Joi.number().required(),\n        JWT_EXPIRES_ACCESSTOKEN: Joi.string().required(),\n        JWT_EXPIRES_REFRESHTOKEN: Joi.string().required(),\n        CORS: Joi.string() /*.uri()*/\n          .required(),\n        PORT: Joi.string().required(),\n        NODE_ENV: Joi.string().required(),\n      }),\n    }),\n    ThrottlerModule.forRoot({\n      throttlers: [\n        {\n          ttl: 60,\n          limit: 10,\n        },\n      ],\n    }),\n    TypeOrmModule.forRootAsync({\n      imports: [ConfigModule],\n      inject: [ConfigService],\n      useFactory: (config: ConfigService) => ({\n        type: \"mariadb\",\n        host: config.get<string>(\"DB_HOST\"),\n        port: config.get<number>(\"DB_PORT\"),\n        username: config.get<string>(\"DB_USER\"),\n        password: config.get<string>(\"DB_PASS\"),\n        database: config.get<string>(\"DB_NAME\"),\n        entities: [\n          User,\n          Product,\n          Cart,\n          CartItem,\n          Order,\n          Review,\n          Verification,\n          FailedAttempt,\n          PasswordReset,\n          Log,\n          RefreshTokenBlacklist,\n        ],\n        synchronize: false,\n        extra: {\n          connectionLimit: config.get<number>(\"DB_POOL_SIZE\") || 10,\n        },\n      }),\n    }),\n    AdminModule,\n    AuthModule,\n    UserModule,\n    LogModule,\n  ],\n  controllers: [AppController],\n  providers: [\n    AppService,\n    {\n      provide: APP_GUARD,\n      useClass: ThrottlerGuard,\n    },\n    {\n      provide: APP_FILTER,\n      useClass: AllExceptionsFilter,\n    },\n  ],\n})\nexport class AppModule implements NestModule {\n  configure(consumer: MiddlewareConsumer) {\n    consumer.apply(CsrfMiddleware).forRoutes(\"\");\n  }\n}\n"],"version":3}