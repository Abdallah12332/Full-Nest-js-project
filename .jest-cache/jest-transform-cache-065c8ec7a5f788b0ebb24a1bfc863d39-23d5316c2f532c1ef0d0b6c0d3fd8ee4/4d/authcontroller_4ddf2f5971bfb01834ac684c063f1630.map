{"version":3,"names":["common_1","cov_1norayupy","s","require","auth_service_1","passport_1","main_auth_dto_1","throttler_1","response_dto_1","config_1","AuthController","authService","configService","constructor","f","register_half","dto","req","ipAddress","b","ip","socket","remoteAddress","result","email","register_full","code","register_complete","res","password","refresh_Token","NotFoundException","access_token","cookie","httpOnly","secure","sameSite","path","maxAge","json","ApiResponse","success","login","ismatch","get","log_out","refresh_token","requestPasswordReset","confirmPasswordReset","token","newPassword","googleCallback","profile","id","user","emails","displayName","photos","provider","google","validateGoogleUser","update_token","cookies","getCsrfToken","csrfToken","exports","__decorate","Post","__param","Body","Req","RegisterHalfDto","_c","Object","RegisterFullDto","_d","Res","RegisterCompleteDto","_e","LoginDto","_f","LogOutDto","_g","PasswordResetRequestDto","_h","PasswordResetConfirmDto","_j","Get","UseGuards","AuthGuard","Promise","_k","ThrottlerGuard","Controller","AuthService","_a","_b","ConfigService"],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/auth/auth.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Post,\n  Req,\n  Get,\n  UseGuards,\n  NotFoundException,\n  Res,\n} from \"@nestjs/common\";\nimport type { Request, Response } from \"express\";\nimport { AuthService } from \"./auth.service\";\nimport { AuthGuard } from \"@nestjs/passport\";\nimport {\n  RegisterHalfDto,\n  RegisterCompleteDto,\n  RegisterFullDto,\n  LoginDto,\n  PasswordResetRequestDto,\n  PasswordResetConfirmDto,\n  LogOutDto,\n} from \"./Dto/main_auth.dto\";\nimport { GoogleProfile } from \"./GoogleProfile\";\nimport { Cookies } from \"./Cookies\";\nimport { ThrottlerGuard } from \"@nestjs/throttler\";\nimport { ApiResponse } from \"../common/dto/response.dto\";\nimport { ConfigService } from \"@nestjs/config\";\n\n@UseGuards(ThrottlerGuard)\n@Controller(\"auth\")\nexport class AuthController {\n  constructor(\n    private readonly authService: AuthService,\n    private readonly configService: ConfigService,\n  ) {}\n\n  @Post(\"half-register\")\n  async register_half(@Body() dto: RegisterHalfDto, @Req() req: Request) {\n    const ipAddress = req.ip || req.socket.remoteAddress || \"unknown\";\n    const result = await this.authService.register_half(dto.email, ipAddress);\n    return result;\n  }\n  @Post(\"full_register\")\n  async register_full(@Body() dto: RegisterFullDto, @Req() req: Request) {\n    const ipAddress = req.ip || req.socket.remoteAddress || \"unknown\";\n    const result = await this.authService.register_full(\n      dto.email,\n      dto.code,\n      ipAddress,\n    );\n    return result;\n  }\n  @Post(\"complete_register\")\n  async register_complete(\n    @Body() dto: RegisterCompleteDto,\n    @Res() res: Response,\n  ) {\n    const result = await this.authService.register_complete(\n      dto.email,\n      dto.password,\n    );\n    const refresh_Token = result.refresh_Token;\n    if (!refresh_Token) throw new NotFoundException(\"refresh_token not found\");\n    const access_token = result.access_token;\n    if (!access_token) throw new NotFoundException(\"access token not found\");\n    res.cookie(\"refreshToken\", refresh_Token, {\n      httpOnly: false,\n      secure: true,\n      sameSite: \"strict\",\n      path: \"/update_token\",\n      maxAge: 7 * 24 * 60 * 60 * 1000,\n    });\n    return res.json(\n      ApiResponse.success(\"success\", {\n        access_token: access_token,\n      }),\n    );\n  }\n  @Post(\"login\")\n  async login(\n    @Body() dto: LoginDto,\n    @Req() req: Request,\n    @Res() res: Response,\n  ) {\n    const ipAddress = req.ip || req.socket.remoteAddress || \"unknown\";\n    const result = await this.authService.login(\n      dto.email,\n      dto.password,\n      ipAddress,\n    );\n    const refresh_Token = result.refresh_Token;\n    if (!refresh_Token) throw new NotFoundException(\"refersh_token not found\");\n    const access_token = result.access_token;\n    if (!access_token) throw new NotFoundException(\"not found access token\");\n    const ismatch = this.configService.get(\"NODE_ENV\") === \"production\";\n    res.cookie(\"refreshToken\", refresh_Token, {\n      httpOnly: false,\n      secure: ismatch,\n      sameSite: \"strict\",\n      path: \"/update_token\",\n      maxAge: 7 * 24 * 60 * 60 * 1000,\n    });\n    return res.json(\n      ApiResponse.success(\"success\", {\n        access_token,\n      }),\n    );\n  }\n\n  // هنا التوكن هيتمسح بس في الفرونت اند اما في السيرفر مش عارف ايه الطريقه الآمنه الامسح بيها اي توكن\n  @Post(\"log_out\")\n  log_out(@Body() dto: LogOutDto) {\n    return this.authService.log_out(dto.email, dto.refresh_token);\n  }\n\n  @Post(\"password-reset-request\")\n  async requestPasswordReset(@Body() dto: PasswordResetRequestDto) {\n    return await this.authService.requestPasswordReset(dto.email);\n  }\n\n  @Post(\"password-reset-confirm\")\n  async confirmPasswordReset(@Body() dto: PasswordResetConfirmDto) {\n    return await this.authService.confirmPasswordReset(\n      dto.email,\n      dto.token,\n      dto.newPassword,\n    );\n  }\n\n  @Get(\"callback/google\")\n  @UseGuards(AuthGuard(\"google\"))\n  async googleCallback(\n    @Req() req: Request & { user: GoogleProfile },\n    @Res() res: Response,\n  ) {\n    const profile = {\n      id: req.user.id,\n      emails: req.user.emails,\n      displayName: req.user.displayName,\n      photos: req.user.photos,\n      provider: req.user.provider,\n    };\n\n    const google = await this.authService.validateGoogleUser(profile);\n    const refresh_Token = google.refresh_Token;\n    if (!refresh_Token) throw new NotFoundException(\"not found refresh token\");\n    const access_token = google.token;\n    if (!access_token) throw new NotFoundException(\"not found access token\");\n    const user = google.user;\n    if (!user) throw new NotFoundException(\"user not found\");\n    const ismatch = this.configService.get(\"NODE_ENV\") === \"production\";\n    res.cookie(\"refreshToken\", refresh_Token, {\n      httpOnly: false,\n      secure: ismatch,\n      sameSite: \"strict\",\n      path: \"/update_token\",\n      maxAge: 7 * 24 * 60 * 60 * 1000,\n    });\n    return res.json(ApiResponse.success(\"success\", { user, access_token }));\n  }\n  @Post(\"update_token\")\n  async update_token(\n    @Body(\"email\") email: string,\n    @Req() req: Request,\n  ): Promise<ApiResponse<{ access_token: string }>> {\n    const cookies = req.cookies as Cookies;\n    const refresh_Token = cookies.refresh_Token;\n\n    if (!refresh_Token) {\n      throw new NotFoundException(\"no refresh Token\");\n    }\n    const access_token = await this.authService.update_token(\n      email,\n      refresh_Token,\n    );\n    return ApiResponse.success(\"Token refreshed successfully\", {\n      access_token: access_token.access_token,\n    });\n  }\n  @Get(\"csrf\")\n  getCsrfToken(@Req() req: Request) {\n    return { csrfToken: req.csrfToken?.() };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}