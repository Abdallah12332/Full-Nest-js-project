{"version":3,"names":["common_1","cov_2ozuchudyj","s","require","typeorm_1","Log_entity_1","typeorm_2","LogService","logRepo","constructor","f","log","message","context","save","level","error","trace","b","warn","getlog","take","skip","find","order","timestamp","exports","__decorate","Injectable","__param","InjectRepository","Log","Repository","_a","Object"],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/log/log.service.ts"],"sourcesContent":["import { Injectable } from \"@nestjs/common\";\nimport { InjectRepository } from \"@nestjs/typeorm\";\nimport { Log } from \"../entities/Log.entity\";\nimport { Repository } from \"typeorm\";\n@Injectable()\nexport class LogService {\n  constructor(\n    @InjectRepository(Log) private readonly logRepo: Repository<Log>,\n  ) {}\n  async log(message: string, context?: string) {\n    await this.logRepo.save({ level: \"info\", message, context });\n  }\n  async error(message: string, trace?: string, context?: string) {\n    await this.logRepo.save({\n      level: \"error\",\n      message: `${message} ${trace || \"\"}`,\n      context,\n    });\n  }\n  async warn(message: string, context?: string) {\n    await this.logRepo.save({ level: \"warn\", message, context });\n  }\n  async getlog(take: number, skip: number) {\n    return await this.logRepo.find({\n      take,\n      skip,\n      order: { timestamp: \"DESC\" },\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA;AAAA;AAAA,CAAAC,cAAA,GAAAC,CAAA,QAAAC,OAAA;AACA,MAAAC,SAAA;AAAA;AAAA,CAAAH,cAAA,GAAAC,CAAA,QAAAC,OAAA;AACA,MAAAE,YAAA;AAAA;AAAA,CAAAJ,cAAA,GAAAC,CAAA,QAAAC,OAAA;AACA,MAAAG,SAAA;AAAA;AAAA,CAAAL,cAAA,GAAAC,CAAA,QAAAC,OAAA;AAAqC;AAAAF,cAAA,GAAAC,CAAA;AAE9B,IAAMK,UAAU,GAAhB,MAAMA,UAAU;EAEqBC,OAAA;EAD1CC,YAC0CD,OAAwB;IAAA;IAAAP,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAC,CAAA;IAAxB,KAAAM,OAAO,GAAPA,OAAO;EAC9C;EACH,MAAMG,GAAGA,CAACC,OAAe,EAAEC,OAAgB;IAAA;IAAAZ,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAC,CAAA;IACzC,MAAM,IAAI,CAACM,OAAO,CAACM,IAAI,CAAC;MAAEC,KAAK,EAAE,MAAM;MAAEH,OAAO;MAAEC;IAAO,CAAE,CAAC;EAC9D;EACA,MAAMG,KAAKA,CAACJ,OAAe,EAAEK,KAAc,EAAEJ,OAAgB;IAAA;IAAAZ,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAC,CAAA;IAC3D,MAAM,IAAI,CAACM,OAAO,CAACM,IAAI,CAAC;MACtBC,KAAK,EAAE,OAAO;MACdH,OAAO,EAAE,GAAGA,OAAO;MAAI;MAAA,CAAAX,cAAA,GAAAiB,CAAA,WAAAD,KAAK;MAAA;MAAA,CAAAhB,cAAA,GAAAiB,CAAA,WAAI,EAAE,GAAE;MACpCL;KACD,CAAC;EACJ;EACA,MAAMM,IAAIA,CAACP,OAAe,EAAEC,OAAgB;IAAA;IAAAZ,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAC,CAAA;IAC1C,MAAM,IAAI,CAACM,OAAO,CAACM,IAAI,CAAC;MAAEC,KAAK,EAAE,MAAM;MAAEH,OAAO;MAAEC;IAAO,CAAE,CAAC;EAC9D;EACA,MAAMO,MAAMA,CAACC,IAAY,EAAEC,IAAY;IAAA;IAAArB,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAC,CAAA;IACrC,OAAO,MAAM,IAAI,CAACM,OAAO,CAACe,IAAI,CAAC;MAC7BF,IAAI;MACJC,IAAI;MACJE,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAM;KAC3B,CAAC;EACJ;CACD;AAAA;AAAAxB,cAAA,GAAAC,CAAA;AAxBYwB,OAAA,CAAAnB,UAAA,GAAAA,UAAA;AAAU;AAAAN,cAAA,GAAAC,CAAA;qBAAVK,UAAU,GAAAoB,UAAA,EADtB,IAAA3B,QAAA,CAAA4B,UAAU,GAAE,EAGRC,OAAA,QAAAzB,SAAA,CAAA0B,gBAAgB,EAACzB,YAAA,CAAA0B,GAAG,CAAC,G;;qCAA2BzB,SAAA,CAAA0B,UAAU;AAAA;AAAA,CAAA/B,cAAA,GAAAiB,CAAA,WAAVZ,SAAA,CAAA0B,UAAU;AAAA;AAAA,CAAA/B,cAAA,GAAAiB,CAAA,WAAAe,EAAA;AAAA;AAAA,CAAAhC,cAAA,GAAAiB,CAAA,WAAAgB,MAAA,I,EAFlD3B,UAAU,CAwBtB","ignoreList":[]}