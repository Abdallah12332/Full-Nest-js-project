{"file":"/home/omar/Desktop/Protofolio_without_redis/src/user/user.controller.spec.ts","mappings":"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","names":[],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/user/user.controller.spec.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/unbound-method */\nimport { Test, TestingModule } from \"@nestjs/testing\";\nimport { UserController } from \"./user.controller\";\nimport { UserService } from \"./user.service\";\nimport { ThrottlerGuard } from \"@nestjs/throttler\";\nimport { JwtAuthGuard } from \"../auth/guards/auth.guard\";\n\ndescribe(\"UserController\", () => {\n  let controller: UserController;\n  let service: UserService;\n\n  beforeEach(async () => {\n    const module: TestingModule = await Test.createTestingModule({\n      controllers: [UserController],\n      providers: [\n        {\n          provide: UserService,\n          useValue: {\n            Add_Review: jest.fn(),\n            Edit_Review: jest.fn(),\n            Remove_Review: jest.fn(),\n            Add_Cart_Item: jest.fn(),\n            Remove_Cart_Item: jest.fn(),\n            increase_Quantity: jest.fn(),\n            decrease_Quantity: jest.fn(),\n            SearchProducts: jest.fn(),\n            FindProductsByCategory: jest.fn(),\n          },\n        },\n      ],\n    })\n      .overrideGuard(ThrottlerGuard)\n      .useValue({ canActivate: () => true })\n      .overrideGuard(JwtAuthGuard)\n      .useValue({ canActivate: () => true })\n      .compile();\n\n    controller = module.get<UserController>(UserController);\n    service = module.get<UserService>(UserService);\n  });\n\n  it(\"should be defined\", () => {\n    expect(controller).toBeDefined();\n  });\n\n  it(\"should call Add_Review\", async () => {\n    jest.spyOn(service, \"Add_Review\").mockResolvedValue(\"ok\");\n    const result = await controller.Add_Review({\n      email: \"a@b.com\",\n      comment: \"good\",\n      productId: \"1\",\n      rating: 5,\n    });\n    expect(service.Add_Review).toHaveBeenCalledWith(\"a@b.com\", \"good\", \"1\", 5);\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Review added successfully\",\n      }),\n    );\n  });\n\n  it(\"should call Edit_Review\", async () => {\n    jest.spyOn(service, \"Edit_Review\").mockResolvedValue(\"ok\");\n    const result = await controller.Edit_Review({\n      email: \"a@b.com\",\n      reviewId: \"123\",\n      comment: \"updated\",\n      rating: 4,\n    });\n    expect(service.Edit_Review).toHaveBeenCalled();\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Review updated successfully\",\n      }),\n    );\n  });\n\n  it(\"should call Remove_Review\", async () => {\n    jest.spyOn(service, \"Remove_Review\").mockResolvedValue(\"ok\");\n    const result = await controller.Remove_Review({\n      email: \"a@b.com\",\n      reviewId: \"123\",\n    });\n    expect(service.Remove_Review).toHaveBeenCalledWith(\"a@b.com\", \"123\");\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Review removed successfully\",\n      }),\n    );\n  });\n\n  it(\"should call Add_Cart_Item\", async () => {\n    jest.spyOn(service, \"Add_Cart_Item\").mockResolvedValue(\"ok\");\n    const result = await controller.Add_Cart_Item({\n      cartId: \"c1\",\n      productId: \"p1\",\n    });\n    expect(service.Add_Cart_Item).toHaveBeenCalledWith(\"c1\", \"p1\");\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Item added to cart successfully\",\n      }),\n    );\n  });\n\n  it(\"should call Remove_Cart_Item\", async () => {\n    jest.spyOn(service, \"Remove_Cart_Item\").mockResolvedValue(\"ok\");\n    const result = await controller.Remove_Cart_Item({\n      cartId: \"c1\",\n      productId: \"p1\",\n    });\n    expect(service.Remove_Cart_Item).toHaveBeenCalledWith(\"c1\", \"p1\");\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Item removed from cart successfully\",\n      }),\n    );\n  });\n\n  it(\"should call increase_Quantity\", async () => {\n    jest.spyOn(service, \"increase_Quantity\").mockResolvedValue(\"ok\");\n    const result = await controller.increase_Quantity({ cartItemId: \"ci1\" });\n    expect(service.increase_Quantity).toHaveBeenCalledWith(\"ci1\");\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Quantity increased successfully\",\n      }),\n    );\n  });\n\n  it(\"should call decrease_Quantity\", async () => {\n    jest.spyOn(service, \"decrease_Quantity\").mockResolvedValue(\"ok\");\n    const result = await controller.decrease_Quantity({ cartItemId: \"ci1\" });\n    expect(service.decrease_Quantity).toHaveBeenCalledWith(\"ci1\");\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Quantity decreased successfully\",\n      }),\n    );\n  });\n\n  it(\"should call SearchProducts\", async () => {\n    const mockResult = {\n      products: [],\n      currentPage: 1,\n      totalPages: 1,\n    };\n    jest.spyOn(service, \"SearchProducts\").mockResolvedValue(mockResult);\n    const result = await controller.SearchProducts({\n      searchTerm: \"test\",\n      page: 1,\n    });\n    expect(service.SearchProducts).toHaveBeenCalledWith(\"test\", 1);\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Products retrieved successfully\",\n        data: mockResult.products,\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        pagination: expect.objectContaining({\n          currentPage: mockResult.currentPage,\n          totalPages: mockResult.totalPages,\n        }),\n      }),\n    );\n  });\n\n  it(\"should call FindProductsByCategory\", async () => {\n    const mockResult = {\n      products: [],\n      currentPage: 1,\n      totalPages: 1,\n    };\n    jest.spyOn(service, \"FindProductsByCategory\").mockResolvedValue(mockResult);\n    const result = await controller.FindProductsByCategory({\n      categoryId: \"cat1\",\n      page: 2,\n    });\n    expect(service.FindProductsByCategory).toHaveBeenCalledWith(\"cat1\", 2);\n    expect(result).toEqual(\n      expect.objectContaining({\n        success: true,\n        message: \"Products retrieved successfully\",\n        data: mockResult.products,\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        pagination: expect.objectContaining({\n          currentPage: mockResult.currentPage,\n          totalPages: mockResult.totalPages,\n        }),\n      }),\n    );\n  });\n});\n"],"version":3}