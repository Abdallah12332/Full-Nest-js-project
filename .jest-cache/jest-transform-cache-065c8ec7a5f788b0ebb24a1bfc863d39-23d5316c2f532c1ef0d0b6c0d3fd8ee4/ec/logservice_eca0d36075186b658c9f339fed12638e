d1d76af52948088c3fac0807b0881910
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.LogService = void 0;
const common_1 = require("@nestjs/common");
const typeorm_1 = require("@nestjs/typeorm");
const Log_entity_1 = require("../entities/Log.entity");
const typeorm_2 = require("typeorm");
let LogService = class LogService {
    logRepo;
    constructor(logRepo) {
        this.logRepo = logRepo;
    }
    async log(message, context) {
        await this.logRepo.save({ level: "info", message, context });
    }
    async error(message, trace, context) {
        await this.logRepo.save({
            level: "error",
            message: `${message} ${trace || ""}`,
            context,
        });
    }
    async warn(message, context) {
        await this.logRepo.save({ level: "warn", message, context });
    }
    async getlog(take, skip) {
        return await this.logRepo.find({
            take,
            skip,
            order: { timestamp: "DESC" },
        });
    }
};
exports.LogService = LogService;
exports.LogService = LogService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(Log_entity_1.Log)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], LogService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvb21hci9EZXNrdG9wL1Byb3RvZm9saW9fd2l0aG91dF9yZWRpcy9zcmMvbG9nL2xvZy5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBNEM7QUFDNUMsNkNBQW1EO0FBQ25ELHVEQUE2QztBQUM3QyxxQ0FBcUM7QUFFOUIsSUFBTSxVQUFVLEdBQWhCLE1BQU0sVUFBVTtJQUVxQjtJQUQxQyxZQUMwQyxPQUF3QjtRQUF4QixZQUFPLEdBQVAsT0FBTyxDQUFpQjtJQUMvRCxDQUFDO0lBQ0osS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFlLEVBQUUsT0FBZ0I7UUFDekMsTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUNELEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBZSxFQUFFLEtBQWMsRUFBRSxPQUFnQjtRQUMzRCxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ3RCLEtBQUssRUFBRSxPQUFPO1lBQ2QsT0FBTyxFQUFFLEdBQUcsT0FBTyxJQUFJLEtBQUssSUFBSSxFQUFFLEVBQUU7WUFDcEMsT0FBTztTQUNSLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQWUsRUFBRSxPQUFnQjtRQUMxQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBQ0QsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFZLEVBQUUsSUFBWTtRQUNyQyxPQUFPLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDN0IsSUFBSTtZQUNKLElBQUk7WUFDSixLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFO1NBQzdCLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRixDQUFBO0FBeEJZLGdDQUFVO3FCQUFWLFVBQVU7SUFEdEIsSUFBQSxtQkFBVSxHQUFFO0lBR1IsV0FBQSxJQUFBLDBCQUFnQixFQUFDLGdCQUFHLENBQUMsQ0FBQTt5REFBMkIsb0JBQVUsb0JBQVYsb0JBQVU7R0FGbEQsVUFBVSxDQXdCdEIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvb21hci9EZXNrdG9wL1Byb3RvZm9saW9fd2l0aG91dF9yZWRpcy9zcmMvbG9nL2xvZy5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tIFwiQG5lc3Rqcy9jb21tb25cIjtcbmltcG9ydCB7IEluamVjdFJlcG9zaXRvcnkgfSBmcm9tIFwiQG5lc3Rqcy90eXBlb3JtXCI7XG5pbXBvcnQgeyBMb2cgfSBmcm9tIFwiLi4vZW50aXRpZXMvTG9nLmVudGl0eVwiO1xuaW1wb3J0IHsgUmVwb3NpdG9yeSB9IGZyb20gXCJ0eXBlb3JtXCI7XG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTG9nU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3RSZXBvc2l0b3J5KExvZykgcHJpdmF0ZSByZWFkb25seSBsb2dSZXBvOiBSZXBvc2l0b3J5PExvZz4sXG4gICkge31cbiAgYXN5bmMgbG9nKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IHN0cmluZykge1xuICAgIGF3YWl0IHRoaXMubG9nUmVwby5zYXZlKHsgbGV2ZWw6IFwiaW5mb1wiLCBtZXNzYWdlLCBjb250ZXh0IH0pO1xuICB9XG4gIGFzeW5jIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgdHJhY2U/OiBzdHJpbmcsIGNvbnRleHQ/OiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLmxvZ1JlcG8uc2F2ZSh7XG4gICAgICBsZXZlbDogXCJlcnJvclwiLFxuICAgICAgbWVzc2FnZTogYCR7bWVzc2FnZX0gJHt0cmFjZSB8fCBcIlwifWAsXG4gICAgICBjb250ZXh0LFxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHdhcm4obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0Pzogc3RyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5sb2dSZXBvLnNhdmUoeyBsZXZlbDogXCJ3YXJuXCIsIG1lc3NhZ2UsIGNvbnRleHQgfSk7XG4gIH1cbiAgYXN5bmMgZ2V0bG9nKHRha2U6IG51bWJlciwgc2tpcDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubG9nUmVwby5maW5kKHtcbiAgICAgIHRha2UsXG4gICAgICBza2lwLFxuICAgICAgb3JkZXI6IHsgdGltZXN0YW1wOiBcIkRFU0NcIiB9LFxuICAgIH0pO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=