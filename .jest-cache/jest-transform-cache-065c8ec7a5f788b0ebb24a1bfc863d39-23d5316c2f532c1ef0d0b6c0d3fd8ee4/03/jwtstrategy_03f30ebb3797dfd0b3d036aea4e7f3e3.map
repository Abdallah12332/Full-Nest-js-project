{"file":"/home/omar/Desktop/Protofolio_without_redis/src/auth/jwt.strategy.ts","mappings":";;;;;;;;;;;;;AAAA,2CAA4C;AAC5C,+CAAoD;AACpD,+CAAoD;AAEpD,2CAA+C;AAGxC,IAAM,WAAW,GAAjB,MAAM,WAAY,SAAQ,IAAA,2BAAgB,EAAC,uBAAQ,CAAC;IAC5B;IAA7B,YAA6B,aAA4B;QACvD,MAAM,MAAM,GAAG,aAAa,CAAC,GAAG,CAAS,YAAY,CAAC,CAAC;QACvD,IAAI,CAAC,MAAM;YAAE,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;QAExE,KAAK,CAAC;YACJ,cAAc,EAAE,yBAAU,CAAC,2BAA2B,EAAE;YACxD,gBAAgB,EAAE,KAAK;YACvB,WAAW,EAAE,MAAM;YACnB,MAAM,EAAE,YAAY;SACrB,CAAC,CAAC;QATwB,kBAAa,GAAb,aAAa,CAAe;IAUzD,CAAC;IAED,QAAQ,CAAC,OAAmB;QAC1B,OAAO,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC;IAC9E,CAAC;CACF,CAAA;AAhBY,kCAAW;sBAAX,WAAW;IADvB,IAAA,mBAAU,GAAE;yDAEiC,sBAAa,oBAAb,sBAAa;GAD9C,WAAW,CAgBvB","names":[],"sources":["/home/omar/Desktop/Protofolio_without_redis/src/auth/jwt.strategy.ts"],"sourcesContent":["import { Injectable } from \"@nestjs/common\";\nimport { PassportStrategy } from \"@nestjs/passport\";\nimport { ExtractJwt, Strategy } from \"passport-jwt\";\nimport { JwtPayload } from \"./JwtPayload\";\nimport { ConfigService } from \"@nestjs/config\";\n\n@Injectable()\nexport class JwtStrategy extends PassportStrategy(Strategy) {\n  constructor(private readonly configservice: ConfigService) {\n    const secret = configservice.get<string>(\"JWT_SECRET\");\n    if (!secret) throw new Error(\"JWT_SECRET is not defined in enviroment\");\n\n    super({\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      ignoreExpiration: false,\n      secretOrKey: secret,\n      issuer: \"Protofolio\",\n    });\n  }\n\n  validate(payload: JwtPayload) {\n    return { sub: payload.sub, username: payload.username, role: payload.role };\n  }\n}\n"],"version":3}